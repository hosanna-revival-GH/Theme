<div class="index-section">
  <div class="page-width text-center">
    {% if block.settings.title != blank %}
      <div class="section-header">
        <h2>{{ block.settings.title }}</h2>
      </div>
    {% endif %}

    {%- assign text_column_count = 0 -%}
    {%- assign column_1_enabled = false -%}
    {%- assign column_2_enabled = false -%}
    {%- assign column_3_enabled = false -%}
    {% if block.settings.enable_image_1 or block.settings.title_1 != blank or block.settings.text_1 != blank or block.settings.button_label_1 != blank %}
      {%- assign column_1_enabled = true -%}
      {%- assign text_column_count = text_column_count | plus: 1 -%}
    {% endif %}
    {% if block.settings.enable_image_2 or block.settings.title_2 != blank or block.settings.text_2 != blank or block.settings.button_label_2 != blank %}
      {%- assign column_2_enabled = true -%}
      {%- assign text_column_count = text_column_count | plus: 1 -%}
    {% endif %}
    {% if block.settings.enable_image_3 or block.settings.title_3 != blank or block.settings.text_3 != blank or block.settings.button_label_3 != blank %}
      {%- assign column_3_enabled = true -%}
      {%- assign text_column_count = text_column_count | plus: 1 -%}
    {% endif %}

    {% case text_column_count %}
      {% when 1 %}
        {%- assign grid_item_width = '' -%}
      {% when 2 %}
        {%- assign grid_item_width = 'medium-up--one-half' -%}
      {% when 3 %}
        {%- assign grid_item_width = 'medium-up--one-third' -%}
    {% endcase %}

    <div class="grid grid--flush-bottom">
      {% if column_1_enabled %}
        <div class="grid__item {{ grid_item_width }}" data-aos="row-of-3" style="padding-left: 50px;">
          {% if block.settings.enable_numbers %}
            <p class="h1--huge">1</p>
          {% endif %}
          {% if block.settings.title_1 != blank %}
            <p class="steps__title">{{ block.settings.title_1 }}</p>
          {% endif %}
          {% if block.settings.subtitle_1 != blank %}
          <p><em>{{ block.settings.subtitle_1 }}</em></p>
          {% endif %}
          {% if block.settings.text_1 != blank %}
            <div class="rte-setting text-spacing" style="text-align: {{ block.settings.align_text }}">{{ block.settings.text_1 }}</div>
          {% endif %}
          {% if block.settings.button_label_1 != blank %}
            <a href="{{ block.settings.button_link_1 }}" class="btn btn--full" style="font-size: 1.2em;">
              {{ block.settings.button_label_1 }}
            </a>
          {% endif %}
        </div>
      {% endif %}
      
      {% if column_2_enabled %}
        <div class="grid__item {{ grid_item_width }}" data-aos="row-of-3" style="padding-left: 50px;">
          {% if block.settings.enable_numbers %}
            <p class="h1--huge">2</p>
          {% endif %}
          {% if block.settings.title_2 != blank %}
            <p class="steps__title">{{ block.settings.title_2 }}</p>
          {% endif %}
          {% if block.settings.subtitle_2 != blank %}
          <p><em>{{ block.settings.subtitle_2 }}</em></p>
          {% endif %}
          {% if block.settings.text_2 != blank %}
            <div class="rte-setting text-spacing" style="text-align: {{ block.settings.align_text }}">{{ block.settings.text_2 }}</div>
          {% endif %}
          {% if block.settings.button_label_2 != blank %}
            <a href="{{ block.settings.button_link_2 }}" class="btn btn--full" style="font-size: 1.2em;">
              {{ block.settings.button_label_2 }}
            </a>
          {% endif %}
        </div>
      {% endif %}
      
      {% if column_3_enabled %}
        <div class="grid__item {{ grid_item_width }}" data-aos="row-of-3" style="padding-left: 50px;">
          {% if block.settings.enable_numbers %}
            <p class="h1--huge">3</p>
          {% endif %}
          {% if block.settings.title_3 != blank %}
            <p class="steps__title">{{ block.settings.title_3 }}</p>
          {% endif %}
          {% if block.settings.subtitle_3 != blank %}
          <p><em>{{ block.settings.subtitle_3 }}</em></p>
          {% endif %}
          {% if block.settings.text_3 != blank %}
            <div class="rte-setting text-spacing" style="text-align: {{ block.settings.align_text }}">{{ block.settings.text_3 }}</div>
          {% endif %}
          {% if block.settings.button_label_3 != blank %}
            <a href="{{ block.settings.button_link_3 }}" class="btn btn--full" style="font-size: 1.2em;">
              {{ block.settings.button_label_3 }}
            </a>
          {% endif %}
        </div>
      {% endif %}
      
    </div>
  </div>
</div>
